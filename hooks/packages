Quantum Server
==============

quantum-server

# OVS
quantum-plugin-openvswitch quantum-plugin-openvswitch-agent 

# Configure connection to the database
 -> store in sql_connection in plugins.

# OVS

/etc/quantum/plugins/openvswitch/ovs_quantum_plugin.ini

enable_tunneling=True
tenant_network_type=gre
tunnel_id_ranges=1:1000
# only if node is running the agent
local_ip=$(unit-get private-address) # data network

service quantum-server restart

# Add internal bridge

ovs-vsctl add-br br-int

# restart openvswitch plugin

# Same everywhere

quantum-dhcp-agent
quantum-l3-agent

ovs-vsctl add-br br-ex
ovs-vsctl add-port br-ex $(config-get external-port)

# Keystone - need to review keystone charm to see how this works.

keystone service-create --name quantum --type network --description 'OpenStack Networking Service'
keystone endpoint-create --region $REGION --service-id $ID --publicurl \
    'http://$IP:9696/' --adminurl 'http://$IP:9696/' --internalurl 'http://$IP:9696/'


keystone user-create --name=quantum --pass=$SERVICE_PASSWORD --tenant-id service 
keystone user-role-add --user_id 45e9461fa61e48f99de1adcd0b38eae7 --role_id e45af7cf33be4dac8070aa8310144ce3 \
              --tenant_id 950fe8e5ed5f4659a8556ac836e8943d
